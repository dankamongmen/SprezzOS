#!/bin/sh

export FSIZE="18"
export FHEIGHT="18"
export FONT="Terminus (TTF)"

# Initialize palette to Tango-Dark
# See http://cpansearch.perl.org/src/HINRIK/App-ConPalette-0.1.5/bin/conpalette
echo -en "\e]P0000000" #black
echo -en "\e]P1cc0000" #darkred
echo -en "\e]P24e9a06" #darkgreen
echo -en "\e]P3c4a000" #brown
echo -en "\e]P43465a4" #darkblue
echo -en "\e]P575507b" #darkmagenta
echo -en "\e]P606989a" #darkcyan
echo -en "\e]P7aaaaaa" #lightgrey
echo -en "\e]P8555753" #darkgrey
echo -en "\e]P9ef2929" #red
echo -en "\e]PA8ae234" #green
echo -en "\e]PBfce94f" #yellow
echo -en "\e]PC729fcf" #blue
echo -en "\e]PDad8fa8" #magenta
echo -en "\e]PE34e2e2" #cyan
echo -en "\e]PFd3d7cf" #white

echo -ne "\e[?25l" # hide cursor
fbv -ciuker "$1" << EOF
q
EOF
shift
export FBTERM_BACKGROUND_IMAGE=1

# leave in backup and don't exec until fbterm is worked out :/
fbterm -n "$FONT" -s "$FSIZE" --font-height="$FHEIGHT" -- env TERM=fbterm "$@"
exec fbterm -n "$FONT" -s "$FSIZE" --font-height="$FHEIGHT" -- "$@"
