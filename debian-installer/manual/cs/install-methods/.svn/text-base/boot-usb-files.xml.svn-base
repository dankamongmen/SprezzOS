<!-- $Id$ -->
<!-- original version: 66212 -->

 <sect1 condition="bootable-usb" id="boot-usb-files">
 <title>Příprava souborů pro zavedení z USB zařízení</title>

<para>

Pro přípravu USB zařízení budete potřebovat počítač s nainstalovaným
GNU/Linuxem a podporou USB. Dnešní systémy GNU/Linuxu by měly USB
klíčenku rozpoznat automaticky. Pokud tomu tak není, ověřte, zda je
nahraný jaderný modul usb-storage. Po zasunutí USB klíčenky ji systém
naváže na zařízení <filename>/dev/sdX</filename>, kde
<replaceable>X</replaceable> je písmeno z rozsahu a-z. Přesný název
zařízení zjistíte z příkazu <command>dmesg</command>, kde by měl být
o zasunutí a rozpoznání USB zařízení záznam. Pokud klíčenka obsahuje
ochranu proti zápisu, vypněte ji.

</para><warning><para>

Postupem popsaným dále v kapitole si smažete všechna data, která se na
zařízení nachází! Před spuštěním příkazů se raději několikrát
ujistěte, že jste zařízení zadali správně, protože i drobný překlep
může způsobit, že si smažete data na pevném disku.

</para></warning>

  <sect2 id="usb-copy-isohybrid" condition="isohybrid-supported">
  <title>Příprava USB klíčenky s hybridním CD/DVD obrazem</title>
<para>

Obrazy debianích CD/DVD mohou být zapsány přímo na USB klíčenku, což
je nejjednodušší způsob vytvoření zaváděcího USB zařízení. Stačí si
podle <xref linkend="official-cdrom"/> stáhnout některý z obrazů,
který se vejde na vaši USB klíčenku.

</para><para>

Jestliže máte opravdu malou klíčenku v řádu megabajtů, můžete z
adresáře <filename>netboot</filename> stáhnout obraz
<filename>mini.iso</filename> (viz kapitola <xref
linkend="where-files"/>), nicméně tato varianta zavede pouze minimální
instalační systém a zbytek stahuje ze sítě.<footnote><para>

Chcete-li na USB klíčenku přidat firmware, nejprve na ni zapište
<filename>mini.iso</filename>, získejte příslušné soubory s firmwarem
(viz <xref linkend="loading-firmware"/>), odpojte a znovu připojte USB
klíčenku (měly by na ní být vidět dvě oblasti), připojte druhou oblast
a firmware do ní rozbalte:

<informalexample><screen>
<prompt>#</prompt> <userinput>mount /dev/<replaceable>sdX2</replaceable> /mnt</userinput>
<prompt>#</prompt> <userinput>cd /mnt</userinput>
<prompt>#</prompt> <userinput>tar zxvf <replaceable>/cesta/k/</replaceable>firmware.tar.gz</userinput>
<prompt>#</prompt> <userinput>cd /</userinput>
<prompt>#</prompt> <userinput>umount /mnt</userinput>
</screen></informalexample>

</para></footnote>

</para><para>

Zvolený obraz CD/DVD byste měli zapsat přímo na USB klíčenku, čímž
přepíšete všechna data, která na ní byla. Například na systému s
GNU/Linuxem můžete obraz CD/DVD zapsat na USB klíčenku následovně:

<informalexample><screen>
<prompt>#</prompt> <userinput>dd if=<replaceable>debian.iso</replaceable> of=/dev/<replaceable>sdX</replaceable></userinput>
<prompt>#</prompt> <userinput>sync</userinput>
</screen></informalexample>

</para>
  </sect2>

  <sect2 id="usb-copy-easy">
  <title>Ruční kopírování souborů</title>
<para>

Jiný způsob vytvoření instalační USB klíčenky je ruční nakopírování
instalačního systému a obrazu malého instalačního CD. USB klíčenka by
měla mít velikost alespoň 256 MB. Menší velikosti jsou podporovány
pouze při ruční výrobě podle <xref linkend="usb-copy-flexible"/>.

</para><para>

K dispozici máte soubor <filename>hd-media/boot.img.gz</filename>,
který obsahuje všechny instalační soubory (včetně jádra), zavaděč
<phrase arch="x86"><classname>syslinux</classname></phrase>
<phrase arch="powerpc"><classname>yaboot</classname></phrase> a jeho
konfigurační soubor.

</para><para>

I když je tento způsob vytvoření zaváděcího USB média pohodlný, má
jednu zásadní nevýhodu: logická velikost zařízení bude vždy omezena na
256 MB, i když je skutečná kapacita USB klíčenky mnohonásobně
větší. Budete-li ji chtít někdy v budoucnu použít k jinému účelu a
budete-li vyžadovat její celou kapacitu, budete ji muset přerozdělit a
znovu vytvořit souborový systém. Druhá nevýhoda přímo vyplývá z té
první: nikdy nebudete moci na USB klíčenku nakopírovat obraz velkého
CD, vždy budete omezeni na menší obrazy businesscard a netinst.

</para><para arch="x86">

Jediné co musíte se staženým <filename>boot.img.gz</filename> udělat,
je rozbalit ho na USB zařízení:

<informalexample><screen>
<prompt>#</prompt> <userinput>gzip -dc boot.img.gz &gt;/dev/<replaceable>sdX</replaceable></userinput>
</screen></informalexample>

</para><para arch="powerpc">

Na USB zařízení vytvořte <command>mac-fdisk</command>em oblast typu
<quote>Apple_Bootstrap</quote> (příkaz <userinput>C</userinput>)
a stažený obraz do ní rozbalte:

<informalexample><screen>
<prompt>#</prompt> <userinput>gzip -dc boot.img.gz &gt;/dev/<replaceable>sdX2</replaceable></userinput>
</screen></informalexample>

</para><para>

Na klíčence nyní bude jedna velká oblast typu
<phrase arch="x86">FAT16.</phrase> <phrase arch="powerpc">HFS.</phrase>
Připojte ji (<userinput>mount
<replaceable arch="x86">/dev/sdX</replaceable>
<replaceable arch="powerpc">/dev/sdX2</replaceable> /mnt</userinput>)
a nakopírujte na ni ISO obraz malého instalačního CD. Nyní stačí
klíčenku odpojit (<userinput>umount /mnt</userinput>) a je hotovo.

</para>
  </sect2>

  <sect2 id="usb-copy-flexible">
  <title>Ruční kopírování souborů &mdash; pružná cesta</title>
<para>

Pokud máte rádi více pružnosti, nebo jen chcete zjistit <quote>co se
děje za oponou</quote>, můžete použít následující metodu<phrase
arch="not-x86">.</phrase><phrase arch="x86">, ve které mj. ukážeme,
jak místo celého USB zařízení použít pouze první oblast.</phrase>

</para>

&usb-setup-x86.xml;
&usb-setup-powerpc.xml;

  </sect2>
 </sect1>
